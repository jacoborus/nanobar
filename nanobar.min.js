var Nanobar=function(a){var c;c=this;a=a||{};a.bg=a.bg||"#000";(function(a){var b=document.getElementById("nanobar-style");null===b&&(b=document.createElement("style"),b.setAttribute("type","text/css"),b.setAttribute("id","nanobar-style"),document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)))})(".nanobarbar{width:0;height:100%;float:left;}.nanobarbar.active{transition: all 0.3s;}.goOut{margin-top:-4px;opacity:0}.nanobar{float:left;width:100%;height:4px;z-index:9999;}");
this.container=document.createElement("div");this.container.setAttribute("class","nanobar");a.id&&this.container.setAttribute("id",a.id);a.target?this.container.style.position="relative":(this.container.style.position="fixed",this.container.style.top="0");this.bar=document.createElement("div");this.bar.setAttribute("class","nanobarbar");this.bar.style.background=a.bg;this.container.appendChild(this.bar);a.target?a.target.insertBefore(this.container,a.target.firstChild):document.getElementsByTagName("body")[0].appendChild(this.container);
(a=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}())&&this.bar.addEventListener(a,function(){"100%"===c.bar.style.width&&"100%"===c.bar.style.height&&c.finish()});return this.init()};
Nanobar.prototype.init=function(){this.bar.className="nanobarbar";this.bar.style.height="100%";this.bar.style.width=0;var a=this;setTimeout(function(){a.bar.className="nanobarbar active"},1)};Nanobar.prototype.finish=function(){var a=this;this.bar.style.height=0;setTimeout(function(){a.init()},300)};Nanobar.prototype.go=function(a){this.bar.style.width=a+"%"};